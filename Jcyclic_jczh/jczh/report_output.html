<!DOCTYPE html>
<html>

	<head>
		<title class="i18n" name='ticket_output'></title>
		<!--#include virtual="../common/header.shtml"-->
		<!--#include virtual="../common/easyUi.shtml"-->
		<link rel="stylesheet" type="text/css" href="../public/stylesheets/jczh/job_registration.css?v=2018092801" />
		<link rel="stylesheet" type="text/css" href="../public/stylesheets/jczh/Invoice_output.css?v=2018092801" />
		<!--#include virtual="../common/language.shtml" -->
		<script type="text/javascript" src="../public/javascript/jczh/reportOutPut/reportOutPut.js?v=20181126"></script>
	</head>
	<body class="main page" style="height: 100%;">
		<!--Navbar-->
		<!--#include virtual="../common/nav.shtml"-->
		<div id="wrapper">
			<!--Sidebar-->
			<!--#include virtual="../common/sideBar.shtml"-->
			<!--Tools -->
			<section id="tools">
				<ul class="breadcrumb" id="breadcrumb">
					<li class="fs18 i18n" name='ticket_output'></li>
				</ul>
			</section>
			<!--Content-->
			<aside id="content" style="padding-bottom: 0;background-color:#fff;">
				<!--第一部分-->
				<div class="panel panel-default first_cont">
					<div class="panel-heading">
						<h3 class="panel-title">
				            <span class="i18n" name='daily_report' style="font-size: 16px;color: black;"></span>
				        </h3>
					</div>
					<!--第一行-->
					<div class="cont_first">
						<div class="first">
							<label class="control-label first_time i18n" name='final_expected_month_three'></label>
							<div class="input-group time_two">
								<input class="inputDate form-control" type="text" id="endDate" />
							</div>
							

							<div class="time_one">
								&nbsp;&nbsp;—&nbsp;&nbsp;
							</div>

							<div class="input-group first_time1">
								<input class="inputDate form-control" type="text" id="startDate" />
							</div>
							<script>
								$('#startDate').datebox({
									width: '110px'
								})
								$('#endDate').datebox({
									width: '110px'
								})
							</script>
							<div class="text_title">
								<label class="control-label text_title1 i18n" name='customlist_list_of_items_title-23-N'>&#12288;</label>
								<div class="input-group text-cont">
									<input maxlength="100" name="cldiv_name" id="cldiv_name" class=" form-control" type="text" style="border-right: 0;"/>
									<span class="input-group-addon text-iconi" style="border-left:0;">
										<i class="iconfont icon-sousuo" id="searchClient"></i>
									</span>
									<input type="text" hidden="hidden" id="cldiv_cd" />
								</div>
							</div>
							<div class="first_last">
								<span class="i18n" name='ticket_output_sentenceA'></span>
							</div>
						</div>
					</div>
					<div class="cont_first_2">
						<label class="control-label i18n" name='report_type' style="height: 20px;margin-bottom: 10px;"></label>
						<div class="input-group" style="margin-bottom: -10px;">
							<div class="selInput2 form-group radio" style="width: 100%;">
								<label class="radio" style="display: inline-block;white-space:nowrap;">
									    <input type="radio" name="radiosTop" value="jobList" checked="checked">
										<span class="radio-1 i18n" name='ticket_output_sentenceBB'></span>
									</label>
								<label class="radio radio_ot" style="white-space:nowrap;">
										<input type="radio" name="radiosTop"  value="jobLabelsReport" >
										<span class="radio-1 i18n" name='ticket_output_sentenceC'></span>				                              
									</label>
							</div>
						</div>
					</div>
					<!--第三行-->	
					<button id="report_button" onclick="exportExcelOnChoose('radiosTop')" class="btn btn-success cont_first_btn i18n" name='report'></button>
				</div>
				<!--第二部分-->
				<div class="panel panel-default first_cont" style="	margin-top: 2%;">
					<div class="panel-heading">
						<h3 class="panel-title">
				            <span class="i18n" name='monthly_report' style="font-size: 16px;color: black;"></span>
				        </h3>
					</div>
					<!--第一行-->
					<div class="cont_first">
						<div class="first">
							<label class="control-label second_cont i18n" name='final_expected_month'></label>
							<div class="input-group second_cont_one">
								<input class="inputDate form-control date-box-required" type="text" id="dlvDate" />
							</div>
							<script>
								$('#dlvDate').datebox({
									width: '110px'
								})
							</script>
						</div>
					</div>
					<div class="cont_first_2">
						<label class="control-label i18n" name='report_type' style="margin-bottom: 10px;"></label>
						<div class="input-group" style="margin-bottom: -10px;">
							<div class="selInput2 form-group radio" style="width: 100%;">
								<label class="radio" style="display: inline-block;">
									    <input type="radio" name="radiosBottom" value="monthBalance" checked="checked">
										<span class="radio-1 i18n" name='ticket_output_sentenceD'></span>
									</label>
								<label class="radio radio_ot">
										<input type="radio" name="radiosBottom"  value="madeCostList" >
										<span class="radio-1 i18n" name='ticket_output_sentenceE'></span>
										<span class="i18n-input" selectname='suppliersRegistration_common_prompt' selectattr='data-original-title'>
											<i class="iconfont icon-i toolTipR"></i>
										</span>
									</label>
								<label class="radio radio_ot">
										<input type="radio" name="radiosBottom"  value="paybelReport" >
										<span class="radio-1 i18n" name='ticket_output_sentenceF'></span>				                              
									</label>
								<label class="radio radio_ot">
										<input type="radio" name="radiosBottom"  value="predestineCostList" >
										<span class="radio-1 i18n" name='ticket_output_sentenceG'></span>				                              
									</label>
								<label class="radio radio_ot">
									<input type="radio" name="radiosBottom"  value="accountReports" >
									<span class="radio-1 i18n" name='ticket_output_sentenceH'></span>
								</label>
							</div>
						</div>
					</div>
					<!--第三行-->
					<!--<button class="btn btn-success cont_first_btn i18n" name='report'>出力</button>-->
					<button onclick="exportExcelOnChoose('radiosBottom')" class="btn btn-success cont_first_btn i18n" name='report'></button>				
				</div>
			</aside>
		</div>
	</body>
<script>
	isCheckLogin(1);
	var tds1 = false,tds2 = false,tds3 = false;
	$("#startDate").datebox({
		onShowPanel: function() {
			getKuaiDate($('#startDate'));
			var p = $('#startDate').datebox('panel');
			var flag = p.find('.calendar-menu').css('display');
			if(flag == 'block'){
				return;
			}
			p.find('span.calendar-text').trigger('click');
			p.find(".datebox-button-a").eq(0).hide();
			p.find(".datebox-button-a").eq(0).closest('td').css('width','0%');
			p.find(".datebox-button-a").eq(1).hide();
			p.find(".datebox-button-a").eq(1).closest('td').css('width','0%');
			p.find(".datebox-button-a").eq(2).closest('td').css('width','100%');
			objV.s($('#endDate').datebox('getText'));
			var span = p.find('span.calendar-text');
			//屏蔽选择今天的按钮  
			//p.find('.calendar-text').hide();
			//输入框原本可填，会触发事件，屏蔽掉  
			p.find('.calendar-menu-year').attr("readonly", "readonly");
			//结束日没有多国语言化问题
			p.find('a.datebox-button-a').eq(1).text(part_language_change_new('boxclear'));
			p.find('a.datebox-button-a').eq(2).text(part_language_change_new('boxclose'));
			if (!tds2) //初始化只需要捆绑一次事件就够了  
			setTimeout(function() {
				tds2 = p.find('div.calendar-menu-month-inner td');
				tds2.click(function(e) {
					e.stopPropagation(); //禁止冒泡执行easyui给月份绑定的事件  
					var year = /\d{4}/.exec(span.html())[0] //得到年份  
					month = parseInt($(this).attr('abbr'), 10); //月份  
					if($(this).css('cursor') == 'default'){
						return;
					}
					$('#startDate').datebox('hidePanel').datebox('setValue', year + '-' + month + '-' + '01'); //设置日期的值  
				});
			});
		},
		formatter: function(d) { //设置格式  
			if(d == null){
				return;
			}
			return d.getFullYear() + '-' + (d.getMonth() < 9 ? '0' + (d.getMonth() + 1) : (d.getMonth() + 1));
		}
	});
	$("#endDate").datebox({
		onShowPanel: function() {
			getKuaiDate($('#endDate'));
			var p = $('#endDate').datebox('panel');
			var flag = p.find('.calendar-menu').css('display');
			if(flag == 'block'){
				return;
			}
			p.find('span.calendar-text').trigger('click');
			p.find(".datebox-button-a").eq(0).hide();
			p.find(".datebox-button-a").eq(0).closest('td').css('width','0%');
			p.find(".datebox-button-a").eq(1).hide();
			p.find(".datebox-button-a").eq(1).closest('td').css('width','0%');
			p.find(".datebox-button-a").eq(2).closest('td').css('width','100%');
			objV.e($.getAccountDate());
			var span = p.find('span.calendar-text');
			//屏蔽选择今天的按钮  
			//p.find('.calendar-text').hide();
			//输入框原本可填，会触发事件，屏蔽掉  
			p.find('.calendar-menu-year').attr("readonly", "readonly");
			if (!tds1) //初始化只需要捆绑一次事件就够了  
			setTimeout(function() {
				tds1 = p.find('div.calendar-menu-month-inner td');
				tds1.click(function(e) {
					e.stopPropagation(); //禁止冒泡执行easyui给月份绑定的事件  
					var year = /\d{4}/.exec(span.html())[0] //得到年份  
					month = parseInt($(this).attr('abbr'), 10); //月份  
					if($(this).css('cursor') == 'default'){
						return;
					}
					$('#endDate').datebox('hidePanel').datebox('setValue', year + '-' + month + '-' + '01'); //设置日期的值  
				});
			});
		},
		formatter: function(d) { //设置格式  
			if(d == null){
				return;
			}
			return d.getFullYear() + '-' + (d.getMonth() < 9 ? '0' + (d.getMonth() + 1) : (d.getMonth() + 1));
		},
		onChange:function(date){
			if(date == undefined){
				//$("#endDate").attr('data_fl',0);
				return;
			}			
			if(date.split('-')[1] == '11'){
				var ert = '01';
				var ert2 = Number(date.split('-')[0]) + 1;
			}else if(date.split('-')[1] == '12'){
				var ert = '02';
				var ert2 = Number(date.split('-')[0]) + 1;
			}else{
				var ert =  Number(date.split('-')[1]) + 2<10?'0'+(Number(date.split('-')[1]) + 2):Number(date.split('-')[1]) + 2;
				var ert2 = date.split('-')[0];
			}
			var a = ert2 +'-'+ ert + '-01 00:00:00';//小三个月
			var aa = new Date(a);
			var bb = new Date(date+'-01 00:00:00');
			$('#startDate').datebox().datebox('calendar').calendar({
				validator: function(date) {	
					if(date <= aa && date >= bb){
						return date;
					}
				}
			});
			$('#startDate').datebox('setValue',date+'-01');
		}
	});
	$("#dlvDate").datebox({
		onShowPanel: function() {
			getKuaiDate($("#dlvDate"));
			var p = $('#dlvDate').datebox('panel');
			var flag = p.find('.calendar-menu').css('display');
			if(flag == 'block'){
				return;
			}
			p.find('span.calendar-text').trigger('click');
			p.find(".datebox-button-a").eq(0).hide();
			p.find(".datebox-button-a").eq(0).closest('td').css('width','0%');
			p.find(".datebox-button-a").eq(1).hide();
			p.find(".datebox-button-a").eq(1).closest('td').css('width','0%');
			p.find(".datebox-button-a").eq(2).closest('td').css('width','100%');
			var accountDate = getAccDate_t($.getAccountDate());
			if (window.radioChangeFlag){
				objV.d($.getAccountDate().replace('/','-'));
			}else {
				objV.d(accountDate);
			}
			var span = p.find('span.calendar-text');
			//屏蔽选择今天的按钮  
			//p.find('.calendar-text').hide();
			//输入框原本可填，会触发事件，屏蔽掉  
			p.find('.calendar-menu-year').attr("readonly", "readonly");
			if (!tds3) //初始化只需要捆绑一次事件就够了  
			setTimeout(function() {
				tds3 = p.find('div.calendar-menu-month-inner td');
				tds3.click(function(e) {
					e.stopPropagation(); //禁止冒泡执行easyui给月份绑定的事件  
					var year = /\d{4}/.exec(span.html())[0] //得到年份  
					month = parseInt($(this).attr('abbr'), 10); //月份  
					if($(this).css('cursor') == 'default'){
						return;
					}
					$('#dlvDate').datebox('hidePanel').datebox('setValue', year + '-' + month + '-' + '01'); //设置日期的值  
				});
			});
		},
		formatter: function(d) { //设置格式  
			if(d == null){
				return;
			}
			return d.getFullYear() + '-' + (d.getMonth() < 9 ? '0' + (d.getMonth() + 1) : (d.getMonth() + 1));
		}
	});
	var objV = validateShowInit();
</script>
</html>